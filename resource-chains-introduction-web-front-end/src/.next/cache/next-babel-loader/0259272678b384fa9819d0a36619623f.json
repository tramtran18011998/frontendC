{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\COMPUTER\\\\Desktop\\\\project\\\\resource-chains-introduction-web-front-end\\\\src\\\\modules\\\\loginPage\\\\components\\\\loginPage.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { Component } from 'react';\nimport Link from \"next/link\";\nimport Button from '@material-ui/core/Button';\nimport { ThemeProvider } from '@material-ui/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Router from 'next/router';\nimport FormControl from '@material-ui/core/FormControl';\nimport fetch from 'unfetch';\nimport cookies from 'js-cookie';\nimport { css } from '@emotion/core';\nimport { ClipLoader } from 'react-spinners';\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\n\nfunction login(token, roleName, id) {\n  cookies.set('token', token, {\n    expires: 0.125\n  });\n  cookies.set('roleName', roleName, {\n    expires: 0.125\n  });\n  cookies.set('id', id, {\n    expires: 0.125\n  });\n  if (roleName === \"ROLE_ADMIN\") return Router.push(\"/admin/home\");\n  return Router.push(\"/\");\n}\n\nvar loginUrl = \"http://localhost:8080/api/auth/login\";\n\nvar LoginPage =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginPage, _Component);\n\n  function LoginPage(props) {\n    var _this;\n\n    _classCallCheck(this, LoginPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginPage).call(this, props));\n    _this.state = {\n      username: '',\n      password: '',\n      usernameValid: false,\n      passwordValid: false,\n      isLoginFail: false,\n      error: '',\n      loading: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.validateForm = _this.validateForm.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(LoginPage, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      this.setState(_defineProperty({}, event.target.name, event.target.value));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (cookies.get(\"roleName\") === \"ROLE_WRITER\") Router.push(\"/writers\");\n\n      if (cookies.get(\"token\") !== undefined) {\n        console.log(cookies.get(\"token\") !== \"\");\n        Router.push(\"/admin/home\");\n      }\n\n      this.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (cookies.get(\"token\") !== undefined) {\n        console.log(cookies.get(\"token\") !== \"\");\n        return;\n      }\n\n      this.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      var username = this.state.username;\n      var password = this.state.password;\n      var regEx = '(^[a-zA-Z0-9]+$)|(^(.+)@(.+))';\n      var regExPwd = '^.{6,}$';\n\n      if (username === '' || password === '') {\n        alert('can\\'t be empty');\n        return false;\n      } else return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (cookies.get(\"token\") !== undefined || cookies.get(\"roleName\") === \"ROLE_WRITER\") {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        });\n      }\n\n      var handleLogin = function handleLogin() {\n        _this2.setState({\n          loading: true\n        });\n\n        if (_this2.validateForm()) {\n          fetch(loginUrl, {\n            method: 'POST',\n            body: _JSON$stringify({\n              usernameOrEmail: _this2.state.username,\n              password: _this2.state.password\n            }),\n            headers: {\n              \"Content-type\": \"application/json; charset=UTF-8\"\n            }\n          }).then(function (response) {\n            if (response.status !== 200) {\n              _this2.setState({\n                isLoginFail: true\n              });\n\n              return;\n            }\n\n            if (response.ok) {\n              var token = response.json();\n              console.log(\"token\" + token);\n              return response.json();\n            } else {\n              console.log('lol no'); // let error = new Error(response.statusText)\n              // error.response = response\n              // throw error\n            }\n          }).then(function (data) {\n            _this2.setState({\n              loading: false\n            });\n\n            console.log(data);\n            if (data === undefined) return;\n\n            if (data) {\n              var token = data.accessToken;\n              var role = data.roleName;\n              login(token, role, data.userProfileDto.id);\n            } else {}\n          });\n        }\n      };\n\n      return cookies.get(\"token\") !== undefined || cookies.get(\"roleName\") === \"ROLE_WRITER\" ? React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(_JSXStyle, {\n        id: \"38895905\",\n        __self: this\n      }, \".Bg-login.jsx-38895905{background:url(\\\"../../../static/bg-01.jpg\\\");background-size:cover;background-position:center center;height:100%;position:fixed;z-index:-1;width:100%;height:100%;box-shadow:0px 13px 59px -18px rgba(0,0,0,0.75);}.form-login.jsx-38895905{background:white;height:80%;width:80%;margin-left:10%;}@media only screen and (max-width:710px){.bg-part.jsx-38895905{display:none;}.container.jsx-38895905{width:100%;}}@media only screen and (max-width:1100px){h3.jsx-38895905{display:none;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcQ09NUFVURVJcXERlc2t0b3BcXHByb2plY3RcXHJlc291cmNlLWNoYWlucy1pbnRyb2R1Y3Rpb24td2ViLWZyb250LWVuZFxcc3JjXFxtb2R1bGVzXFxsb2dpblBhZ2VcXGNvbXBvbmVudHNcXGxvZ2luUGFnZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrSnFCLEFBR2dFLEFBVzFCLEFBT1EsQUFHRixBQUtFLFdBSmpCLEVBSEEsQUFRQSxJQWZFLFdBQ0QsVUFDTSxNQWJPLFVBYzFCLFlBYnNDLGtDQUN2QixZQUNHLGVBQ0osV0FDQSxXQUNDLFlBRWhCLGdEQUFDIiwiZmlsZSI6IkM6XFxVc2Vyc1xcQ09NUFVURVJcXERlc2t0b3BcXHByb2plY3RcXHJlc291cmNlLWNoYWlucy1pbnRyb2R1Y3Rpb24td2ViLWZyb250LWVuZFxcc3JjXFxtb2R1bGVzXFxsb2dpblBhZ2VcXGNvbXBvbmVudHNcXGxvZ2luUGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgTGluayBmcm9tIFwibmV4dC9saW5rXCJcbmltcG9ydCBCdXR0b24gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvQnV0dG9uJztcbmltcG9ydCB7IFRoZW1lUHJvdmlkZXIgfSBmcm9tICdAbWF0ZXJpYWwtdWkvc3R5bGVzJztcbmltcG9ydCBUZXh0RmllbGQgZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvVGV4dEZpZWxkJztcbmltcG9ydCBSb3V0ZXIgZnJvbSAnbmV4dC9yb3V0ZXInO1xuaW1wb3J0IEZvcm1Db250cm9sIGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL0Zvcm1Db250cm9sJztcbmltcG9ydCBmZXRjaCBmcm9tICd1bmZldGNoJztcbmltcG9ydCBjb29raWVzIGZyb20gJ2pzLWNvb2tpZSc7XG5pbXBvcnQgeyBjc3MgfSBmcm9tICdAZW1vdGlvbi9jb3JlJztcbmltcG9ydCB7IENsaXBMb2FkZXIgfSBmcm9tICdyZWFjdC1zcGlubmVycyc7XG5cbmltcG9ydCBQb3BwZXIgZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvUG9wcGVyJztcbmltcG9ydCBGYWRlIGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL0ZhZGUnO1xuaW1wb3J0IFBhcGVyIGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL1BhcGVyJztcblxuZnVuY3Rpb24gbG9naW4gKCB0b2tlbiwgcm9sZU5hbWUsaWQgKXtcbiAgICBjb29raWVzLnNldCgndG9rZW4nLCB0b2tlbiwgeyBleHBpcmVzOiAwLjEyNSB9KVxuICAgIGNvb2tpZXMuc2V0KCdyb2xlTmFtZScsIHJvbGVOYW1lLCB7IGV4cGlyZXM6IDAuMTI1IH0pXG4gICAgY29va2llcy5zZXQoJ2lkJywgaWQsIHsgZXhwaXJlczogMC4xMjUgfSlcbiAgICBpZihyb2xlTmFtZSA9PT0gXCJST0xFX0FETUlOXCIpXG4gICAgICAgcmV0dXJuIFJvdXRlci5wdXNoKFwiL2FkbWluL2hvbWVcIilcbiAgICByZXR1cm4gUm91dGVyLnB1c2goXCIvXCIpXG59XG5cbmNvbnN0IGxvZ2luVXJsID0gYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9hcGkvYXV0aC9sb2dpbmBcblxuXG5jbGFzcyBMb2dpblBhZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKXtcbiAgICAgICAgc3VwZXIocHJvcHMpXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7IFxuICAgICAgICAgICAgdXNlcm5hbWU6ICcnLCBcbiAgICAgICAgICAgIHBhc3N3b3JkOiAnJywgXG4gICAgICAgICAgICB1c2VybmFtZVZhbGlkOiBmYWxzZSwgXG4gICAgICAgICAgICBwYXNzd29yZFZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGlzTG9naW5GYWlsIDogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogJycsXG4gICAgICAgICAgICBsb2FkaW5nOmZhbHNlXG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZSA9IHRoaXMuaGFuZGxlQ2hhbmdlLmJpbmQodGhpcylcbiAgICAgICAgdGhpcy52YWxpZGF0ZUZvcm0gPSB0aGlzLnZhbGlkYXRlRm9ybS5iaW5kKHRoaXMpXG4gICAgfVxuXG4gICAgaGFuZGxlQ2hhbmdlKGV2ZW50KXtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7W2V2ZW50LnRhcmdldC5uYW1lXSA6IGV2ZW50LnRhcmdldC52YWx1ZX0pXG4gICAgfVxuXG4gICAgY29tcG9uZW50RGlkTW91bnQoKXtcbiAgICAgICAgaWYoY29va2llcy5nZXQoXCJyb2xlTmFtZVwiKSA9PT0gXCJST0xFX1dSSVRFUlwiKVxuICAgICAgICAgICAgUm91dGVyLnB1c2goXCIvd3JpdGVyc1wiKVxuICAgICAgICBpZihjb29raWVzLmdldChcInRva2VuXCIpICE9PSB1bmRlZmluZWQgKVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb29raWVzLmdldChcInRva2VuXCIpICE9PSBcIlwiKVxuICAgICAgICAgICAgUm91dGVyLnB1c2goXCIvYWRtaW4vaG9tZVwiKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbG9hZGluZzpmYWxzZVxuICAgICAgICB9KVxuICAgIH1cbiAgICBjb21wb25lbnRXaWxsTW91bnQoKXtcbiAgICAgICAgaWYoY29va2llcy5nZXQoXCJ0b2tlblwiKSAhPT0gdW5kZWZpbmVkIClcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc29sZS5sb2coY29va2llcy5nZXQoXCJ0b2tlblwiKSAhPT0gXCJcIilcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbG9hZGluZzpmYWxzZVxuICAgICAgICB9KVxuICAgIH1cbiAgICB2YWxpZGF0ZUZvcm0oKXtcbiAgICAgICAgY29uc3QgdXNlcm5hbWUgPSB0aGlzLnN0YXRlLnVzZXJuYW1lXG4gICAgICAgIGNvbnN0IHBhc3N3b3JkID0gdGhpcy5zdGF0ZS5wYXNzd29yZCBcblxuICAgICAgICBjb25zdCByZWdFeCA9ICcoXlthLXpBLVowLTldKyQpfCheKC4rKUAoLispKSdcbiAgICAgICAgY29uc3QgcmVnRXhQd2QgPSAnXi57Nix9JCdcbiAgICAgICAgaWYodXNlcm5hbWU9PT0nJyB8fCBwYXNzd29yZD09PScnKXtcbiAgICAgICAgICAgIGFsZXJ0KCdjYW5cXCd0IGJlIGVtcHR5JylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9IFxuICAgICAgICBlbHNlIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYoY29va2llcy5nZXQoXCJ0b2tlblwiKSAhPT0gdW5kZWZpbmVkIHx8IGNvb2tpZXMuZ2V0KFwicm9sZU5hbWVcIikgPT09IFwiUk9MRV9XUklURVJcIilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuICg8ZGl2PjwvZGl2PilcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoYW5kbGVMb2dpbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICAgIGxvYWRpbmc6dHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlRm9ybSgpKXtcbiAgICAgICAgICAgICAgICBmZXRjaChsb2dpblVybCwge1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lT3JFbWFpbDogdGhpcy5zdGF0ZS51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5zdGF0ZS5wYXNzd29yZFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyE9PSAyMDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNMb2dpbkZhaWw6dHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLm9rKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuID0gcmVzcG9uc2UuanNvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInRva2VuXCIgKyB0b2tlbilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2wgbm8nKVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGV0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB0aHJvdyBlcnJvclxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkaW5nOmZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICB0b2tlbiAgPSBkYXRhLmFjY2Vzc1Rva2VuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByb2xlID0gZGF0YS5yb2xlTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgbG9naW4oIHRva2VuLCByb2xlLCBkYXRhLnVzZXJQcm9maWxlRHRvLmlkIClcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNle1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChjb29raWVzLmdldChcInRva2VuXCIpICE9PSB1bmRlZmluZWQgIHx8IGNvb2tpZXMuZ2V0KFwicm9sZU5hbWVcIikgPT09IFwiUk9MRV9XUklURVJcIik/ICg8ZGl2PjwvZGl2PikgOiAoXG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+XG4gICAgICAgICAgICAgICAgICAgIHtgXG4gICAgICAgICAgICAgICAgLkJnLWxvZ2lue1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOnVybChcIi4uLy4uLy4uL3N0YXRpYy9iZy0wMS5qcGdcIik7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciBjZW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDoxMDAlO1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjpmaXhlZDtcbiAgICAgICAgICAgICAgICAgICAgei1pbmRleDotMTtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6MTAwJTtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OjEwMCU7XG4gICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAxM3B4IDU5cHggLTE4cHggcmdiYSgwLDAsMCwwLjc1KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAuZm9ybS1sb2dpbntcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDo4MCU7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOjgwJTtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6MTAlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDcxMHB4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmJnLXBhcnR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb250YWluZXJ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMTAwcHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoM3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiQmctbG9naW5cIj5cblxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgaGVpZ2h0OiBcIjUwcHhcIiwgd2lkdGg6IFwiMTAwJVwiIH19PlxuXG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxDbGlwTG9hZGVyXG4gICAgICAgICAgICAgICAgICAgIGNzcz17YHBvc2l0aW9uOmZpeGVkOyB6LWluZGV4OjIwOyBsZWZ0OjQ1JTt0b3A6MjAlYH1cbiAgICAgICAgICAgICAgICAgICAgc2l6ZVVuaXQ9e1wicHhcIn1cbiAgICAgICAgICAgICAgICAgICAgc2l6ZT17MTUwfVxuICAgICAgICAgICAgICAgICAgICBjb2xvcj17JyMxMjNhYmMnfVxuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nPXt0aGlzLnN0YXRlLmxvYWRpbmd9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLWxvZ2luIHJvd1wiIHN0eWxlPXt7IHpJbmRleDogXCIxMDBcIiB9fT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCIgY29sLW1kLTUgcHQtNSBwYi01IGNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC01XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3R5bGU9e3sgd2lkdGg6IFwiODAlXCIsIGZsb2F0OiBcInJpZ2h0XCIgfX0gc3JjPVwiLi4vLi4vLi4vc3RhdGljL2xvZ292bi5wbmdcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBzdHlsZT17eyB0ZXh0QWxpZ246IFwiY2VudGVyXCIsIG1hcmdpbkJvdHRvbTogXCI1MHB4XCIgfX0+UmVzb3VyY2UgQ2hhaW5zPC9oMz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuaXNMb2dpbkZhaWwgPyA8cCBzdHlsZT17e3BhZGRpbmc6XCIxMHB4XCIsYmFja2dyb3VuZDogXCJyZWRcIixjb2xvcjogXCJ3aGl0ZVwiLHRleHRBbGlnbjogXCJjZW50ZXJcIn19PllvdXIgdXNlcm5hbWUgb3IgZW1haWwsIHBhc3N3b3JkIGlzIHdyb25nPC9wPiA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICA8Rm9ybUNvbnRyb2wgc3R5bGU9e3sgd2lkdGg6IFwiODAlXCIsIG1hcmdpbkxlZnQ6XCIzMHB4XCIgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFRoZW1lUHJvdmlkZXIgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cIlVzZXJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJ0ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ9XCJtdWktdGhlbWUtcHJvdmlkZXItb3V0bGluZWQtaW5wdXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZT1cInVzZXJuYW1lXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gKHRoaXMuc2V0U3RhdGUoe1tlLnRhcmdldC5uYW1lXSA6IGUudGFyZ2V0LnZhbHVlfSkpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSB7dGhpcy5zdGF0ZS51c2VybmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L0Zvcm1Db250cm9sPlxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxGb3JtQ29udHJvbCBzdHlsZT17eyB3aWR0aDogXCI4MCVcIiwgbWFyZ2luTGVmdDpcIjMwcHhcIiwgbWFyZ2luVG9wOlwiMzBweFwiIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxUaGVtZVByb3ZpZGVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VGV4dEZpZWxkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbD1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJwYXNzd29yZFwiXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkPVwibXVpLXRoZW1lLXByb3ZpZGVyLW91dGxpbmVkLWlucHV0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+ICh0aGlzLnNldFN0YXRlKHtbZS50YXJnZXQubmFtZV0gOiBlLnRhcmdldC52YWx1ZX0pKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0ge3RoaXMuc3RhdGUucGFzc3dvcmR9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L1RoZW1lUHJvdmlkZXI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9ybUNvbnRyb2w+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7bWFyZ2luVG9wOlwiNTBweFwiLHdpZHRoOlwiODAlXCIsIG1hcmdpbkxlZnQ6XCIzMHB4XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7ZmxvYXQ6XCJsZWZ0XCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxMaW5rIGhyZWY9XCIvXCI+Rm9yZ290IHBhc3N3b3JkID88L0xpbms+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17ZSA9PiBoYW5kbGVMb2dpbigpfSB2YXJpYW50PVwiY29udGFpbmVkXCIgc3R5bGU9e3sgcGFkZGluZzpcIjE1cHggMzBweFwiLGZsb2F0OlwicmlnaHRcIn19IGNvbG9yPVwicHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNpZ24gVXBcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbC1tZC03IHB0LTUgYmctcGFydFwiIHN0eWxlPXt7IGJhY2tncm91bmQ6IFwiIzQ2MzQzNDJlXCJ9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVwiLi4vLi4vLi4vc3RhdGljL2xvZ2luRm9ybS5wbmdcIiBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIsIG1hcmdpbkJvdHRvbTogXCIxMDBweFwiIH19IC8+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2dpblBhZ2U7Il19 */\\n/*@ sourceURL=C:\\\\Users\\\\COMPUTER\\\\Desktop\\\\project\\\\resource-chains-introduction-web-front-end\\\\src\\\\modules\\\\loginPage\\\\components\\\\loginPage.js */\"), React.createElement(\"div\", {\n        className: \"jsx-38895905\" + \" \" + \"Bg-login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          height: \"50px\",\n          width: \"100%\"\n        },\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(ClipLoader, {\n        css: \"position:fixed; z-index:20; left:45%;top:20%\",\n        sizeUnit: \"px\",\n        size: 150,\n        color: '#123abc',\n        loading: this.state.loading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        style: {\n          zIndex: \"100\"\n        },\n        className: \"jsx-38895905\" + \" \" + \"form-login row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"jsx-38895905\" + \" \" + \" col-md-5 pt-5 pb-5 container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"jsx-38895905\" + \" \" + \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"jsx-38895905\" + \" \" + \"col-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          width: \"80%\",\n          \"float\": \"right\"\n        },\n        src: \"../../../static/logovn.png\",\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      })), React.createElement(\"h3\", {\n        style: {\n          textAlign: \"center\",\n          marginBottom: \"50px\"\n        },\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Resource Chains\")), this.state.isLoginFail ? React.createElement(\"p\", {\n        style: {\n          padding: \"10px\",\n          background: \"red\",\n          color: \"white\",\n          textAlign: \"center\"\n        },\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Your username or email, password is wrong\") : \"\", React.createElement(FormControl, {\n        style: {\n          width: \"80%\",\n          marginLeft: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, React.createElement(ThemeProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"Username\",\n        type: \"text\",\n        id: \"mui-theme-provider-outlined-input\",\n        name: \"username\",\n        onChange: function onChange(e) {\n          return _this2.setState(_defineProperty({}, e.target.name, e.target.value));\n        },\n        value: this.state.username,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }))), React.createElement(FormControl, {\n        style: {\n          width: \"80%\",\n          marginLeft: \"30px\",\n          marginTop: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(ThemeProvider, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(TextField, {\n        label: \"password\",\n        type: \"password\",\n        id: \"mui-theme-provider-outlined-input\",\n        name: \"password\",\n        onChange: function onChange(e) {\n          return _this2.setState(_defineProperty({}, e.target.name, e.target.value));\n        },\n        value: this.state.password,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        style: {\n          marginTop: \"50px\",\n          width: \"80%\",\n          marginLeft: \"30px\"\n        },\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          \"float\": \"left\"\n        },\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(Link, {\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, \"Forgot password ?\")), React.createElement(Button, {\n        onClick: function onClick(e) {\n          return handleLogin();\n        },\n        variant: \"contained\",\n        style: {\n          padding: \"15px 30px\",\n          \"float\": \"right\"\n        },\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }, \"Sign Up\"))), React.createElement(\"div\", {\n        style: {\n          background: \"#4634342e\"\n        },\n        className: \"jsx-38895905\" + \" \" + \"col-md-7 pt-5 bg-part\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"../../../static/loginForm.png\",\n        style: {\n          width: \"100%\",\n          marginBottom: \"100px\"\n        },\n        className: \"jsx-38895905\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return LoginPage;\n}(Component);\n\nexport default LoginPage;","map":{"version":3,"sources":["C:\\Users\\COMPUTER\\Desktop\\project\\resource-chains-introduction-web-front-end\\src\\modules\\loginPage\\components\\loginPage.js"],"names":["React","Component","Link","Button","ThemeProvider","TextField","Router","FormControl","fetch","cookies","css","ClipLoader","Popper","Fade","Paper","login","token","roleName","id","set","expires","push","loginUrl","LoginPage","props","state","username","password","usernameValid","passwordValid","isLoginFail","error","loading","handleChange","bind","validateForm","event","setState","target","name","value","get","undefined","console","log","regEx","regExPwd","alert","handleLogin","method","body","usernameOrEmail","headers","then","response","status","ok","json","data","accessToken","role","userProfileDto","height","width","zIndex","textAlign","marginBottom","padding","background","color","marginLeft","e","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from \"next/link\"\nimport Button from '@material-ui/core/Button';\nimport { ThemeProvider } from '@material-ui/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Router from 'next/router';\nimport FormControl from '@material-ui/core/FormControl';\nimport fetch from 'unfetch';\nimport cookies from 'js-cookie';\nimport { css } from '@emotion/core';\nimport { ClipLoader } from 'react-spinners';\n\nimport Popper from '@material-ui/core/Popper';\nimport Fade from '@material-ui/core/Fade';\nimport Paper from '@material-ui/core/Paper';\n\nfunction login ( token, roleName,id ){\n    cookies.set('token', token, { expires: 0.125 })\n    cookies.set('roleName', roleName, { expires: 0.125 })\n    cookies.set('id', id, { expires: 0.125 })\n    if(roleName === \"ROLE_ADMIN\")\n       return Router.push(\"/admin/home\")\n    return Router.push(\"/\")\n}\n\nconst loginUrl = `http://localhost:8080/api/auth/login`\n\n\nclass LoginPage extends Component {\n    constructor(props){\n        super(props)\n        this.state = { \n            username: '', \n            password: '', \n            usernameValid: false, \n            passwordValid: false,\n            isLoginFail : false,\n            error: '',\n            loading:false\n        }\n\n        this.handleChange = this.handleChange.bind(this)\n        this.validateForm = this.validateForm.bind(this)\n    }\n\n    handleChange(event){\n        this.setState({[event.target.name] : event.target.value})\n    }\n\n    componentDidMount(){\n        if(cookies.get(\"roleName\") === \"ROLE_WRITER\")\n            Router.push(\"/writers\")\n        if(cookies.get(\"token\") !== undefined )\n        {\n            console.log(cookies.get(\"token\") !== \"\")\n            Router.push(\"/admin/home\")\n        }\n        this.setState({\n            loading:false\n        })\n    }\n    componentWillMount(){\n        if(cookies.get(\"token\") !== undefined )\n        {\n            console.log(cookies.get(\"token\") !== \"\")\n            return\n        }\n        this.setState({\n            loading:false\n        })\n    }\n    validateForm(){\n        const username = this.state.username\n        const password = this.state.password \n\n        const regEx = '(^[a-zA-Z0-9]+$)|(^(.+)@(.+))'\n        const regExPwd = '^.{6,}$'\n        if(username==='' || password===''){\n            alert('can\\'t be empty')\n            return false\n        } \n        else return true;\n    }\n\n    render() {\n        if(cookies.get(\"token\") !== undefined || cookies.get(\"roleName\") === \"ROLE_WRITER\")\n        {\n            return (<div></div>)\n        }\n        const handleLogin = () => {\n            this.setState({\n                loading:true\n            })\n            if (this.validateForm()){\n                fetch(loginUrl, {\n                    method: 'POST',\n                    body: JSON.stringify({\n                      usernameOrEmail: this.state.username,\n                      password: this.state.password\n                    }),\n                    headers: {\n                      \"Content-type\": \"application/json; charset=UTF-8\"\n                    }\n                  })\n\n                .then(response => {\n                    if(response.status!== 200){\n                        this.setState({\n                            isLoginFail:true\n                        })\n                        return\n                    }\n                    if(response.ok){\n                        const token = response.json()\n                        console.log(\"token\" + token)\n                        return response.json()\n                    }\n                    else {\n                        console.log('lol no')\n                        // let error = new Error(response.statusText)\n                        // error.response = response\n                        // throw error\n                    }\n                }\n                )\n                .then(data => {\n                    this.setState({\n                        loading:false\n                    })\n                    console.log(data)\n                    if(data === undefined)\n                        return\n                    if(data){\n                        const  token  = data.accessToken\n                        const role = data.roleName\n                        login( token, role, data.userProfileDto.id )\n                    } else{\n\n                    }\n                })\n            }\n        }\n\n        return (cookies.get(\"token\") !== undefined  || cookies.get(\"roleName\") === \"ROLE_WRITER\")? (<div></div>) : (\n            <div>\n                <style jsx>\n                    {`\n                .Bg-login{\n                    background:url(\"../../../static/bg-01.jpg\");\n                    background-size: cover;\n                    background-position: center center;\n                    height:100%;\n                    position:fixed;\n                    z-index:-1;\n                    width:100%;\n                    height:100%;\n                    box-shadow: 0px 13px 59px -18px rgba(0,0,0,0.75)\n                }\n                .form-login{\n                    background: white;\n                    height:80%;\n                    width:80%;\n                    margin-left:10%;\n                }\n                @media only screen and (max-width: 710px) {\n                            .bg-part{\n                                display: none;\n                            }\n                            .container{\n                                width: 100%;\n                            }\n                        }\n                 @media only screen and (max-width: 1100px) {\n                            h3{\n                                display: none;\n                            }\n                        }               \n                `}\n                </style>\n                <div className=\"Bg-login\">\n\n                </div>\n                <div style={{ height: \"50px\", width: \"100%\" }}>\n\n                </div>\n                    <ClipLoader\n                    css={`position:fixed; z-index:20; left:45%;top:20%`}\n                    sizeUnit={\"px\"}\n                    size={150}\n                    color={'#123abc'}\n                    loading={this.state.loading}\n                    />\n                <div className=\"form-login row\" style={{ zIndex: \"100\" }}>\n                    <div className=\" col-md-5 pt-5 pb-5 container\">\n                        <div className=\"row\">\n                            <div className=\"col-5\">\n                                <img style={{ width: \"80%\", float: \"right\" }} src=\"../../../static/logovn.png\" />\n                            </div>\n                            <h3 style={{ textAlign: \"center\", marginBottom: \"50px\" }}>Resource Chains</h3>\n                        </div>\n                        {this.state.isLoginFail ? <p style={{padding:\"10px\",background: \"red\",color: \"white\",textAlign: \"center\"}}>Your username or email, password is wrong</p> : \"\"}\n                        <FormControl style={{ width: \"80%\", marginLeft:\"30px\" }}>\n                            <ThemeProvider >\n                                <TextField\n                                    label=\"Username\"\n                                    type=\"text\"\n                                    \n                                    id=\"mui-theme-provider-outlined-input\"\n                                    name=\"username\"\n                                    onChange={(e) => (this.setState({[e.target.name] : e.target.value}))}\n                                    value = {this.state.username}\n                                />\n                            </ThemeProvider>\n                        </FormControl>\n\n\n                        <FormControl style={{ width: \"80%\", marginLeft:\"30px\", marginTop:\"30px\" }}>\n                            <ThemeProvider>\n                                <TextField\n                                    label=\"password\"\n                                    type=\"password\"\n\n                                    id=\"mui-theme-provider-outlined-input\"\n                                    name=\"password\"\n                                    onChange={(e) => (this.setState({[e.target.name] : e.target.value}))}\n                                    value = {this.state.password}\n\n                                />\n                            </ThemeProvider>\n\n                        </FormControl>\n                        <div style={{marginTop:\"50px\",width:\"80%\", marginLeft:\"30px\"}}>\n                            <div style={{float:\"left\"}}>\n                        <Link href=\"/\">Forgot password ?</Link>\n\n                            </div>\n                        <Button onClick={e => handleLogin()} variant=\"contained\" style={{ padding:\"15px 30px\",float:\"right\"}} color=\"primary\">\n                            Sign Up\n                        </Button>\n                        </div>\n                    </div>\n                    <div className=\"col-md-7 pt-5 bg-part\" style={{ background: \"#4634342e\"}}>\n                        <img src=\"../../../static/loginForm.png\" style={{ width: \"100%\", marginBottom: \"100px\" }} />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}